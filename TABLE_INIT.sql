DROP TABLE FORUM_ARTICLE; -- 討論區文章.
DROP TABLE FORUM_BOARD; -- 討論區.
DROP TABLE PICNIC; -- 野餐團.
DROP TABLE INTERNAL_LETTER; -- 站內信.
DROP TABLE CONTACT_LIST; -- 會員通訊錄名單.
DROP TABLE GENERAL_MEMBER; -- 一般會員.

DROP SEQUENCE FORUM_ARTICLE_NO_SQ;
DROP SEQUENCE FORUM_NO_SQ;
DROP SEQUENCE PICNIC_NO_SQ;
DROP SEQUENCE LETTER_NO_SQ;
DROP SEQUENCE MEM_NO_SQ;



-- 設定英文語系.
ALTER SESSION SET NLS_LANGUAGE = 'American';

-- 一般會員.
CREATE TABLE GENERAL_MEMBER (
MEM_NO                 VARCHAR2(10) NOT NULL,
MEM_NAME            VARCHAR2(30) NOT NULL,
MEM_GEN               CHAR(1),
MEM_BIRTH            DATE,
MEM_ADDR            VARCHAR2(300),
MEM_MAIL              VARCHAR2(30) NOT NULL UNIQUE,
MEM_PSW               VARCHAR2(128) NOT NULL,
MEM_SELF              VARCHAR2(800),
MEM_PIC                 BLOB,
MEM_COIN              NUMBER(*),
QR_CODE                BLOB,
MEM_STATE            CHAR(1) NOT NULL,
CONSTRAINT GENERAL_MEMBER_PRIMARY_KEY PRIMARY KEY(MEM_NO));

CREATE SEQUENCE MEM_NO_SQ
INCREMENT BY 1
START WITH 1
MAXVALUE 99999999
NOCACHE
NOCYCLE; 

-- 使用列舉欄位方式, 將資料新增至 GENERAL_MEMBER 表中.
-- 1, pw0001.
INSERT INTO GENERAL_MEMBER(MEM_NO, MEM_NAME, MEM_GEN, MEM_BIRTH, MEM_ADDR, MEM_MAIL, MEM_PSW, MEM_COIN, MEM_STATE)
VALUES('MG' || LPAD(MEM_NO_SQ.NEXTVAL, 8, '0'), 'shyangs', 'F', '18-JAN-94', '臺北市大安區羅斯福路四段1號', 'shyangs@kimo.com', 'a026de8f8e9bb627828a4559402b831a', 367, 'E');
-- 2
INSERT INTO GENERAL_MEMBER(MEM_NO, MEM_NAME, MEM_GEN, MEM_BIRTH, MEM_ADDR, MEM_MAIL, MEM_PSW, MEM_COIN, MEM_STATE)
VALUES('MG' || LPAD(MEM_NO_SQ.NEXTVAL, 8, '0'), '阿翔', 'M', '28-FEB-88', '彰化縣彰化市進德路1號', 'shyangs@gmail.com', 'e621e7f310445e00a661eacbc7f33542', 536, 'A');
-- 3
INSERT INTO GENERAL_MEMBER(MEM_NO, MEM_NAME, MEM_GEN, MEM_BIRTH, MEM_ADDR, MEM_MAIL, MEM_PSW, MEM_COIN, MEM_STATE)
VALUES('MG' || LPAD(MEM_NO_SQ.NEXTVAL, 8, '0'), '毛毛', 'M', '26-MAR-90', '臺中市西區民生路140號', 'reprehend@ariat.com', '86de92a688057d1d7946d58a9c5e5f8f', 765, 'A');
-- 4
INSERT INTO GENERAL_MEMBER(MEM_NO, MEM_NAME, MEM_GEN, MEM_BIRTH, MEM_ADDR, MEM_MAIL, MEM_PSW, MEM_COIN, MEM_STATE)
VALUES('MG' || LPAD(MEM_NO_SQ.NEXTVAL, 8, '0'), 'flowhd', 'F', '25-APR-98', '新北市三峽區大學路151號', 'ficia@oabru.com', '2a9b67a625d00ad83b72ef247257453a', 0, 'U');
-- 5
INSERT INTO GENERAL_MEMBER(MEM_NO, MEM_NAME, MEM_GEN, MEM_BIRTH, MEM_ADDR, MEM_MAIL, MEM_PSW, MEM_COIN, MEM_STATE)
VALUES('MG' || LPAD(MEM_NO_SQ.NEXTVAL, 8, '0'), '伸儒', 'M', '20-MAY-97', '臺北市中正區思源街18號', 'riufkty@lirtft.com', '896de0bf7b6894f5189c9c7c3f066910', 2898, 'M');
-- 6
INSERT INTO GENERAL_MEMBER(MEM_NO, MEM_NAME, MEM_GEN, MEM_BIRTH, MEM_ADDR, MEM_MAIL, MEM_PSW, MEM_COIN, MEM_STATE)
VALUES('MG' || LPAD(MEM_NO_SQ.NEXTVAL, 8, '0'), '政弘', 'M', '23-JUN-92', '臺北市文山區指南路二段64號', 'ef5hsa@dfhr.com', 'cbbf9abc189f69129f1c93992661d704', 912, 'M');
-- 7
INSERT INTO GENERAL_MEMBER(MEM_NO, MEM_NAME, MEM_GEN, MEM_BIRTH, MEM_ADDR, MEM_MAIL, MEM_PSW, MEM_COIN, MEM_STATE)
VALUES('MG' || LPAD(MEM_NO_SQ.NEXTVAL, 8, '0'), '友維', 'M', '07-JUL-94', '新竹市東區大學路1001號', 'hrfn@jryrr.com', '7d561f587e00f302dc116de93f3edcc2', 2250, 'A');
-- 8
INSERT INTO GENERAL_MEMBER(MEM_NO, MEM_NAME, MEM_GEN, MEM_BIRTH, MEM_ADDR, MEM_MAIL, MEM_PSW, MEM_COIN, MEM_STATE)
VALUES('MG' || LPAD(MEM_NO_SQ.NEXTVAL, 8, '0'), '劍輝', 'M', '11-AUG-96', '桃園市中壢區中大路300號', 'jtytsw@mtert.com', '8d00ec50a565393e529bcb7d12fc8fe7', 710, 'E');
-- 9
INSERT INTO GENERAL_MEMBER(MEM_NO, MEM_NAME, MEM_GEN, MEM_BIRTH, MEM_ADDR, MEM_MAIL, MEM_PSW, MEM_COIN, MEM_STATE)
VALUES('MG' || LPAD(MEM_NO_SQ.NEXTVAL, 8, '0'), '力愷', 'M', '15-SEP-93', '臺北市北投區立農街二段155號', 'ngeem@mytrr.com', '6e15d827e97fd58d1ddebacb970e6a21', 450, 'E');

COMMIT;



-- 會員通訊錄名單.
CREATE TABLE CONTACT_LIST(
MEM_NO                              VARCHAR2(10) NOT NULL,
CONTACT_NO                     VARCHAR2(10) NOT NULL,
RELATIONSHIP                    CHAR(1) NOT NULL,
CONSTRAINT CONTACT_LIST_CONTACTNO_FK FOREIGN KEY (CONTACT_NO) REFERENCES GENERAL_MEMBER(MEM_NO),
CONSTRAINT CONTACT_LIST_MENNO_FK FOREIGN KEY (MEM_NO) REFERENCES GENERAL_MEMBER(MEM_NO),
CONSTRAINT CONTACT_LIST_PRIMARY_KEY PRIMARY KEY (MEM_NO, CONTACT_NO));

INSERT INTO CONTACT_LIST(MEM_NO, CONTACT_NO, RELATIONSHIP)
VALUES('MG00000002', 'MG00000003', 'F');
INSERT INTO CONTACT_LIST(MEM_NO, CONTACT_NO, RELATIONSHIP)
VALUES('MG00000002', 'MG00000005', 'F');
INSERT INTO CONTACT_LIST(MEM_NO, CONTACT_NO, RELATIONSHIP)
VALUES('MG00000002', 'MG00000006', 'F');
INSERT INTO CONTACT_LIST(MEM_NO, CONTACT_NO, RELATIONSHIP)
VALUES('MG00000002', 'MG00000007', 'F');
INSERT INTO CONTACT_LIST(MEM_NO, CONTACT_NO, RELATIONSHIP)
VALUES('MG00000002', 'MG00000008', 'F');
INSERT INTO CONTACT_LIST(MEM_NO, CONTACT_NO, RELATIONSHIP)
VALUES('MG00000002', 'MG00000009', 'F');
INSERT INTO CONTACT_LIST(MEM_NO, CONTACT_NO, RELATIONSHIP)
VALUES('MG00000002', 'MG00000001', 'B');
INSERT INTO CONTACT_LIST(MEM_NO, CONTACT_NO, RELATIONSHIP)
VALUES('MG00000002', 'MG00000004', 'B');

COMMIT;



-- 站內信.
CREATE TABLE INTERNAL_LETTER(
LETTER_NO                VARCHAR2(10) NOT NULL,
SENDER_NO               VARCHAR2(10),
RECIPIENT_NO           VARCHAR2(10),
LETTER_DATE                  DATE,
LETTER_TEXT            CLOB NOT NULL,
LETTER_TITLE      VARCHAR2(90) NOT NULL,
LETTER_STATUS        CHAR(1),
CONSTRAINT INTERNAL_LETTER_SENDERNO_FK FOREIGN KEY (SENDER_NO) REFERENCES GENERAL_MEMBER(MEM_NO),
CONSTRAINT INTERNAL_LETTER_RECIPIENTNO_FK FOREIGN KEY(RECIPIENT_NO) REFERENCES GENERAL_MEMBER(MEM_NO),
CONSTRAINT INTERNAL_LETTER_PRIMARY_KEY PRIMARY KEY(LETTER_NO));

CREATE SEQUENCE LETTER_NO_SQ
INCREMENT BY 1
START WITH 1
MAXVALUE 99999999
NOCACHE
NOCYCLE;

INSERT INTO INTERNAL_LETTER(LETTER_NO, SENDER_NO, RECIPIENT_NO, LETTER_DATE, LETTER_TEXT, LETTER_TITLE, LETTER_STATUS)
VALUES('IL' || LPAD(LETTER_NO_SQ.NEXTVAL, 8, '0'), NULL, 'MG00000002', SYSDATE, '內文: 歡迎', '標題: 系統的歡迎信', 'U');
INSERT INTO INTERNAL_LETTER(LETTER_NO, SENDER_NO, RECIPIENT_NO, LETTER_DATE, LETTER_TEXT, LETTER_TITLE, LETTER_STATUS)
VALUES('IL' || LPAD(LETTER_NO_SQ.NEXTVAL, 8, '0'), 'MG00000004', 'MG00000002', SYSDATE, '內文: 來自好友的信', '標題: 好友的問候', 'U');

COMMIT;



-- 野餐團.
CREATE TABLE PICNIC(
PICNIC_NO                    VARCHAR2(10) NOT NULL,
PICKUPDATE                   DATE,
PICNIC_NAME                 VARCHAR2(300)NOT NULL,
PICNIC_DESC                 CLOB,
PICNIC_STARTUP               DATE NOT NULL,
PICNIC_SETUP                 DATE NOT NULL,
PICNIC_CHK                   CHAR(1),
PICNIC_DATE                  DATE,
PICNIC_PLACE                 VARCHAR(300),
CONSTRAINT PICNIC_PRIMARY_KEY PRIMARY KEY (PICNIC_NO));

CREATE SEQUENCE PICNIC_NO_SQ
INCREMENT BY 1
START WITH 1
MAXVALUE 99999999
NOCACHE
NOCYCLE;

INSERT INTO PICNIC(PICNIC_NO, PICNIC_NAME, PICNIC_STARTUP, PICNIC_SETUP)
VALUES('PG' || LPAD(PICNIC_NO_SQ.NEXTVAL, 8, '0'), '海賊團', SYSDATE, ADD_MONTHS(SYSDATE, 1));

COMMIT;



-- 討論區.
CREATE TABLE FORUM_BOARD(
FORUM_NO                        VARCHAR2(10)NOT NULL,
FORUM_NAME                  VARCHAR2(90)NOT NULL,
FORUM_DESC                     CLOB,
FORUM_STATUS               CHAR(1),
CONSTRAINT FORUM_BOARD_PRIMARY_KEY PRIMARY KEY(FORUM_NO));

CREATE SEQUENCE FORUM_NO_SQ
INCREMENT BY 1
START WITH 1
MAXVALUE 99999999
NOCACHE
NOCYCLE;

INSERT INTO FORUM_BOARD(FORUM_NO, FORUM_NAME)
VALUES('BF' || LPAD(FORUM_NO_SQ.NEXTVAL, 8, '0'), '站務討論與建議');
INSERT INTO FORUM_BOARD(FORUM_NO, FORUM_NAME)
VALUES('BF' || LPAD(FORUM_NO_SQ.NEXTVAL, 8, '0'), '哈拉閒聊');

COMMIT;



-- 討論區文章.
CREATE TABLE FORUM_ARTICLE(
ARTICLE_NO                   VARCHAR2(10)NOT NULL,  
AUTHOR_NO                     VARCHAR2(10),
TOPIC_NO                         VARCHAR2(10),
FORUM_NO                      VARCHAR2(10) NOT NULL,
ARTICLE_TITLE                VARCHAR2(300) NOT NULL,
ARTICLE_TEXT                  CLOB NOT NULL,
ARTICLE_POST                 DATE NOT NULL,
ARTICLE_EDIT                  DATE,
ARTICLE_VIEWS              NUMBER(*)NOT NULL,
ARTICLE_STATUS            CHAR(1),
ARTICLE_KIND                 CHAR(1),
ARTICLE_PW                   VARCHAR2(128),
CONSTRAINT FORUM_ARTICLE_FK FOREIGN KEY(FORUM_NO) REFERENCES FORUM_BOARD(FORUM_NO),
CONSTRAINT FORUM_ARTICLE_PRIMARY_KEY PRIMARY KEY(ARTICLE_NO));

CREATE SEQUENCE FORUM_ARTICLE_NO_SQ
INCREMENT BY 1
START WITH 1
MAXVALUE 99999999
NOCACHE
NOCYCLE;

INSERT INTO FORUM_ARTICLE(ARTICLE_NO, FORUM_NO, ARTICLE_TITLE, ARTICLE_TEXT, ARTICLE_POST, ARTICLE_VIEWS)
VALUES('AF' || LPAD(FORUM_ARTICLE_NO_SQ.NEXTVAL, 8, '0'), 'BF00000001', '[公告] 討論區規範', '規範守則詳細內文', SYSDATE, 0);

COMMIT;

-- 留言板
